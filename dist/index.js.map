{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","/*\r\nCopyright 2005 - 2021 Advantage Solutions, s. r. o.\r\n\r\nThis file is part of ORIGAM (http://www.origam.org).\r\n\r\nORIGAM is free software: you can redistribute it and/or modify\r\nit under the terms of the GNU General Public License as published by\r\nthe Free Software Foundation, either version 3 of the License, or\r\n(at your option) any later version.\r\n\r\nORIGAM is distributed in the hope that it will be useful,\r\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\r\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\r\nGNU General Public License for more details.\r\n\r\nYou should have received a copy of the GNU General Public License\r\nalong with ORIGAM. If not, see <http://www.gnu.org/licenses/>.\r\n*/\r\n\r\nimport S from './styles.module.scss';\r\nimport { observable } from \"mobx\";\r\nimport React, { useState } from \"react\";\r\nimport moment from \"moment\";\r\nimport {\r\n  ILocalization,\r\n  ILocalizer,\r\n  IPluginData,\r\n  IScreenPlugin \r\n} from \"@origam/plugin-interfaces\";\r\nimport { FilePond,registerPlugin } from \"react-filepond\";\r\nimport FilePondPluginFileValidateType from 'filepond-plugin-file-validate-type';\r\n\r\n// Register the plugin\r\nregisterPlugin(FilePondPluginFileValidateType);\r\n\r\n\r\nconst apiurl = \"ApiUrl\";\r\nconst filterFileType = \"FilterFileType\";\r\nconst invalidFileTypeMessage = \"InvalidFileTypeMessage\"\r\n\r\nexport class FileUploadPlugin implements IScreenPlugin {\r\n  $type_IScreenPlugin: 1 = 1;\r\n  id: string = \"\"\r\n  apiurl: string ;\r\n  filterFileType: string | undefined;\r\n  invalidFileTypeMessage: string | undefined;\r\n\r\n  @observable\r\n  initialized = false;\r\n\r\n  initialize(xmlAttributes: { [key: string]: string }): void {\r\n    this.apiurl = this.getXmlParameter(xmlAttributes, apiurl);\r\n    this.filterFileType = this.getXmlParameter(xmlAttributes, filterFileType);\r\n    this.invalidFileTypeMessage = this.getXmlParameter(xmlAttributes, invalidFileTypeMessage);\r\n    this.initialized = true;\r\n  }\r\n  getXmlParameter(xmlAttributes: { [key: string]: string }, parameterName: string) {\r\n    if (!xmlAttributes[parameterName]) {\r\n      throw new Error(`Parameter ${parameterName} was not found.`)\r\n    }\r\n    return xmlAttributes[parameterName];\r\n  }\r\n\r\n  requestSessionRefresh: (() => Promise<any>) | undefined;\r\n   \r\n   getComponent(data: IPluginData, createLocalizer: (localizations: ILocalization[]) => ILocalizer): JSX.Element {\r\n    const localizer = createLocalizer([]);\r\n    \r\n    const fileType:string[] = [filterFileType];\r\n    moment.locale(localizer.locale)\r\n    if (!this.initialized) {\r\n      return <></>;\r\n    }\r\n    \r\n    return (\r\n      <div className={S.mainContainer}>\r\n           <FilePond\r\n        server={apiurl}\r\n        allowFileTypeValidation={true}\r\n        acceptedFileTypes={fileType}\r\n        labelFileTypeNotAllowed={invalidFileTypeMessage}\r\n        instantUpload={true}\r\n        maxParallelUploads={1}\r\n        files={GetFiles()}\r\n        allowReorder={true}\r\n        allowMultiple={true}\r\n        onupdatefiles={SetFiles()}\r\n        labelIdle='Drag & Drop your files or <span class=\"filepond--label-action\">Browse</span>'\r\n      />\r\n      </div>\r\n    );\r\n  }\r\n  @observable\r\n  setScreenParameters: ((parameters: { [p: string]: string }) => void) | undefined;\r\n}\r\nfunction GetFiles()\r\n{\r\n  const [files] = useState([]);\r\n  return files;\r\n}\r\nfunction SetFiles()\r\n{\r\n  const [setFiles] :any = useState([]);\r\n  return setFiles;\r\n}"],"names":["registerPlugin","FilePondPluginFileValidateType","moment","React","FilePond","observable","useState"],"mappings":"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"}